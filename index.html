<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin="anonymous" />
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="app">
        <header>
            <nav>
                <!-- router-linkによるナビゲーション定義-->
                <router-link to="/top">Message</router-link>
                <router-link to="/users">Friends</router-link>
                <router-link to="/users/new">Setting</router-link>             
            </nav>
            <span class="race-top"></span>
        </header> 
        <router-view></router-view>
        
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/vue-router@3.0.1"></script>
    

    <!-- コンポーネントのテンプレート定義 -->
    <!--トップページ-->
    <script type="text/x-template" id="top">
        <div>
            <div class="loading" v-if="loading">読み込み中...</div>
            <div class="error" v-if="error">{{error}}</div>
            <div class="messages">
                <div class="messages-inner">
                    <div v-for="msg in messages" :key="msg.id" class="message">
                        <div class="icon-wrappar">
                            <router-link :to="{name: 'user', params: {userId: msg.id}}">
                                <div :class='iconColor(msg.userId)' class="icon"></div>
                            </router-link>                      
                        </div>
                        <p class="baloon">{{msg.message}}</p>
                    </div>
                </div>
            </div>

            <div class="sending" v-if="sending">Sending...</div>
            <div class="input-message-area">
                <span class="race"></span>
                    <div class="input-message">
                        <div class="input-message-inner">
                            <div class="text">
                                <input type="text" v-model="message.message">
                            </div>
                            <div v-if="error" class="error">
                                {{error}}
                            </div>
                            <div　class="messsage-button">
                                <input type="button" @click="createMessage" value="send"　class="btn btn-malformation btn-malformation--pastel">
                            </div>
                        </div>
                </div>
            </div>
        </div>
    </script>
    <!--ユーザー一覧ページ-->
    <script type="text/x-template" id="user-list">
        <div>
            <div class="loading" v-if="loading">読み込み中...</div>
            <div class="error" v-if="error">{{error}}</div>
            <div v-for="user in users" :key="user.id">
                <router-link :to="{name: 'user', params: {userId: user.id}}"><h2>{{user.name}}</h2></router-link>
            </div>
        </div>
    </script>
    <!--ユーザー詳細ページ-->
    <script type="text/x-template" id="user-detail">
        <div>
            <div class="loading" v-if="loading">読み込み中...</div>
            <div class="error" v-if="error">{{error}}</div>
            <div v-if="user">
                <h2>{{user.name}}</h2>
                <p>{{user.description}}</p>
            </div>
        </div>
    </script>
    <!--ユーザー作成ページ-->
    <script type="text/x-template" id="user-create">
        <div>
            <div class="sending" v-if="sending">Sending...</div>
            <div>
                <h2>新規ユーザー作成</h2>
                <div>
                    <label>名前: </label>
                    <input type="text" v-model="user.name">
                </div>
                <div>
                    <label>説明文: </label>
                    <textarea v-model="user.description"></textarea>
                </div>
                <div v-if="error" class="error">
                    {{error}}
                </div>
                <div>
                    <input type="button" @click="createUser" value="send">
                </div>
            </div>
        </div>
    </script>

    <script src="./script/myjs.js"></script>


    



</body>
</html>